(()=>{var e={991:(e,r,t)=>{"use strict";t.d(r,{yY:()=>o,$q:()=>a,ZA:()=>i,Qi:()=>s,Xx:()=>c,jl:()=>l,CT:()=>u,kl:()=>d});var n=t(306).version,o="temp",a="en",i=!0,s="//dkny.oss-cn-hangzhou.aliyuncs.com/2",c="https://cdn.jsdelivr.net/gh/im6/vp@v".concat(n,"/dist/public"),l="canvas",u="lang",d="_REDUXSTATE_"},598:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n,o=t(116),a=t(856),i=t.n(a);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var c=i().fromJS({list:null,loading:!1});const l=(0,o.handleActions)((s(n={},"admin/getList",(function(e){return e.set("loading",!0)})),s(n,"admin/getList/success",(function(e,r){return e.merge({loading:!1,list:i().fromJS(r.payload)})})),s(n,"admin/getList/fail",(function(e){return e.merge({list:i().fromJS([]),loading:!1})})),s(n,"admin/decideColor",(function(e,r){var t=r.payload;return e.updateIn(["list"],(function(e){return e.filter((function(e){return e.get("id")!==t.id}))}))})),n),c)},616:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var n,o=t(116),a=t(856);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var s=(0,a.fromJS)({loading:!1,colorDef:{},liked:{},colorIdAllByDate:[],colorIdAllByStar:[],colorIdByMyOwn:[]});const c=(0,o.handleActions)((i(n={},"color/get",(function(e){return e.set("loading",!0)})),i(n,"color/get/success",(function(e,r){var t=r.payload,n=(0,a.List)(),o=(0,a.Map)();t.forEach((function(e){n=n.push(e.id),o=o.set(e.id,(0,a.fromJS)(e))}));var i=t.sort((function(e,r){return r.star-e.star})).map((function(e){return e.id}));return e.merge({colorIdAllByDate:n,colorIdAllByStar:(0,a.fromJS)(i),colorDef:o,loading:!1})})),i(n,"color/get/fail",(function(e){return e.merge({colorIdAllByDate:(0,a.List)(),colorIdAllByStar:(0,a.List)(),loading:!1})})),i(n,"color/toggleLike",(function(e,r){var t=r.payload,n=t.willLike,o=t.id;return(n?e.setIn(["liked",o],!0):e.deleteIn(["liked",o])).updateIn(["colorDef",o,"star"],(function(e){return e+(n?1:-1)}))})),i(n,"color/addNew/success",(function(e,r){var t=r.payload,n=t.id,o=e.setIn(["colorDef",n],(0,a.fromJS)(t));return(o=o.update("colorIdAllByDate",(function(e){return e.unshift(n)}))).update("colorIdAllByStar",(function(e){return e.push(n)}))})),i(n,"color/set/likes",(function(e,r){var t=r.payload.reduce((function(e,r){return e.set(r,!0)}),(0,a.Map)());return e.set("liked",t)})),i(n,"color/set/owns",(function(e,r){var t=r.payload;return e.set("colorIdByMyOwn",(0,a.List)(t))})),n),s)},141:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var n,o=t(856),a=t(116);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var s=(0,o.fromJS)({type:null,message:null});const c=(0,a.handleActions)((i(n={},"modal/reset",(function(){return s})),i(n,"modal/admin/getList/fail",(function(){return(0,o.fromJS)({message:"Admin data error",type:"danger"})})),i(n,"modal/admin/decideColor/success",(function(){return(0,o.fromJS)({message:"Adjudicate successfully",type:"success"})})),i(n,"modal/admin/decideColor/fail",(function(){return(0,o.fromJS)({message:"Adjudicate failed",type:"danger"})})),i(n,"modal/color/get/fail",(function(){return(0,o.fromJS)({message:"Get color data error.",type:"danger"})})),i(n,"modal/color/copy",(function(){return(0,o.fromJS)({message:"Copy to clipboard successfully",type:"success"})})),i(n,"modal/color/addNew/success",(function(){return(0,o.fromJS)({message:"Create color successfully, thanks.",type:"success"})})),i(n,"modal/color/addNew/fail",(function(){return(0,o.fromJS)({message:"Create color failed.",type:"danger"})})),i(n,"modal/color/addNew/invalid",(function(){return(0,o.fromJS)({message:"Invalid color value.",type:"danger"})})),i(n,"modal/color/download",(function(){return(0,o.fromJS)({message:"Downloading ...",type:"link"})})),i(n,"modal/user/logoff",(function(){return(0,o.fromJS)({message:"Logout successfully.",type:"info"})})),i(n,"modal/user/auth/fail",(function(){return(0,o.fromJS)({message:"Log in failed",type:"danger"})})),n),s)},137:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var n,o=t(116),a=t(856);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var s=(0,a.fromJS)({detail:null,facebookUrl:null,loading:!1});const c=(0,o.handleActions)((i(n={},"user/auth",(function(e){return e.merge({loading:!0})})),i(n,"user/auth/success",(function(e,r){var t=r.payload;return e.merge({detail:(0,a.fromJS)(t),loading:!1})})),i(n,"user/auth/fail",(function(e){return e.merge({detail:null,loading:!1})})),i(n,"user/logoff",(function(e){return e.merge({detail:null})})),i(n,"user/logoff/success",(function(e,r){var t=r.payload;return e.merge({facebookUrl:t})})),n),s)},470:(e,r,t)=>{"use strict";t.d(r,{px:()=>a,bJ:()=>i,Mh:()=>s,xZ:()=>c,X:()=>l,G4:()=>u,G:()=>d,_7:()=>p,e8:()=>f,TM:()=>m});var n=t(991),o=process.env,a=o.PORT,i=o.SESSION_SECRET,s=o.CSRF_EXCEPTION,c=o.FB_APP_KEY,l=o.FB_APP_SECRET,u=o.FB_REDIRECT_URL,d="https://graph.facebook.com/v3.3",p=n.Xx,f="./".concat("dist","/server"),m=["/robots.txt","/sitemap.xml","/favicon.ico"];s||console.log("No CSRF exception defined"),a||(console.error("No port defined."),process.exit(1))},619:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var n=t(622),o=t.n(n),a=t(470),i=a.TM.reduce((function(e,r){return e[r]=!0,e}),{});const s=function(e,r,t){var n=e.url;if(Object.prototype.hasOwnProperty.call(i,n)){var s=o().resolve(process.cwd(),"".concat(a.e8).concat(n));r.sendFile(s)}else t(404)}},306:e=>{"use strict";e.exports=JSON.parse('{"name":"vp","version":"1.27.0","description":"source code of react.colorpk.com","engines":{"node":">= 14.x"},"scripts":{"dev":"webpack --config ./webpack/develop.js","lint":"eslint ./webpack ./src","test":"jest --coverage","t":"yarn lint && yarn test","build":"webpack --config ./webpack/production.js","start":"node dist/server"},"repository":"git+https://github.com/im6/vp.git","author":"im6","license":"ISC","bugs":{"url":"https://github.com/im6/vp/issues"},"homepage":"https://github.com/im6/vp#readme","devDependencies":{"@babel/core":"^7.14.3","@babel/preset-env":"7.14.2","@babel/preset-react":"^7.13.13","@testing-library/react":"^11.2.7","autoprefixer":"^10.2.5","babel-loader":"^8.2.2","bulma":"^0.9.2","clean-webpack-plugin":"^4.0.0-alpha.0","compression-webpack-plugin":"^8.0.0","copy-webpack-plugin":"^9.0.0","core-js":"^3.12.1","css-loader":"^5.2.6","css-minimizer-webpack-plugin":"^3.0.0","dotenv":"^10.0.0","eslint":"^7.27.0","eslint-config-airbnb":"^18.2.1","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.3","eslint-plugin-jest":"^24.3.6","eslint-plugin-jsx-a11y":"^6.4.1","eslint-plugin-prettier":"^3.4.0","eslint-plugin-react":"7.23.2","eslint-plugin-react-hooks":"^4.2.0","jest":"^27.0.1","js-cookie":"^2.2.1","mini-css-extract-plugin":"^1.6.0","node-sass":"^6.0.0","postcss":"^8.3.0","postcss-loader":"^5.3.0","prettier":"^2.3.0","prop-types":"^15.7.2","react-color":"^2.19.3","redux-logger":"^3.0.6","redux-observable":"^1.2.0","rxjs":"^6.6.7","sass-loader":"^11.1.1","webpack":"^5.37.1","webpack-cli":"^4.7.0","webpack-node-externals":"^3.0.0"},"dependencies":{"axios":"^0.21.1","body-parser":"^1.19.0","connect-redis":"^5.2.0","cookie-parser":"^1.4.5","csurf":"^1.11.0","express":"^4.17.1","express-graphql":"^0.12.0","express-session":"^1.17.2","graphql":"^15.5.0","helmet":"^4.6.0","immutable":"^4.0.0-rc.12","lodash.get":"^4.4.2","mysql":"^2.18.1","react":"^17.0.2","react-dom":"^17.0.2","react-redux":"^7.2.4","react-router-dom":"^5.2.0","redis":"^3.1.2","redux":"^4.1.0","redux-actions":"^2.6.5","regenerator-runtime":"^0.13.7","serialize-javascript":"^5.0.1","uuid":"^8.3.2"},"prettier":{"endOfLine":"auto","trailingComma":"es5","tabWidth":2,"semi":true,"singleQuote":true},"babel":{"presets":["@babel/preset-env",["@babel/preset-react",{"runtime":"automatic"}]]},"eslintConfig":{"extends":["airbnb","prettier","plugin:react-hooks/recommended"],"plugins":["react","jsx-a11y","import","prettier","jest"],"rules":{"prettier/prettier":2,"import/no-extraneous-dependencies":0,"import/no-unresolved":[2,{"ignore":["^components/"]}]},"env":{"browser":true,"jest/globals":true}},"jest":{"verbose":false,"testEnvironment":"jsdom","clearMocks":true,"moduleDirectories":["node_modules","<rootDir>/src/testing"],"moduleNameMapper":{"\\\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$":"<rootDir>/src/testing/fileMock.js","\\\\.(css|sass)$":"<rootDir>/src/testing/styleMock.js","^components/(.*)":"<rootDir>/src/components/$1"},"coverageDirectory":"coverage","coverageThreshold":{"global":{"branches":100,"functions":100,"lines":100,"statements":-10}}},"browserslist":["defaults","cover 99.5%"]}')},758:(e,r,t)=>{var n={"./admin.js":598,"./color.js":616,"./modal.js":141,"./user.js":137};function o(e){var r=a(e);return t(r)}function a(e){if(!t.o(n,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=758},856:e=>{"use strict";e.exports=require("immutable")},622:e=>{"use strict";e.exports=require("path")},116:e=>{"use strict";e.exports=require("redux-actions")}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=require("child_process"),r=(require("regenerator-runtime/runtime"),require("helmet"));var n=t.n(r);const o=require("express");var a=t.n(o);const i=require("body-parser"),s=require("cookie-parser");var c=t.n(s);const l=require("redis");var u=t.n(l);const d=require("express-session");var p=t.n(d);const f=require("connect-redis");var m=t.n(f),g=t(470),h=process.env,v=h.REDIS_HOST,b=h.REDIS_PORT,y=h.REDIS_PASSWORD;v&&b&&y||(console.error("missing redis connection info"),process.exit(1));var x=m()(p()),w=u().createClient({host:v,port:b,password:y,prefix:"vp:"});w.on("error",(function(e){console.error(e),process.exit(1)})),w.on("reconnecting",(function(e,r){console.log("reconnecting, attempt: ".concat(r))})),w.on("connect",(function(){console.log("Redis connect successfully.")}));const k=p()({store:new x({client:w}),secret:g.bJ,resave:!1,saveUninitialized:!1}),j=require("lodash.get");var S=t.n(j);const C=require("uuid"),E=require("axios");var L=t.n(E),I=function(e){return"https://www.facebook.com/v3.3/dialog/oauth?client_id=".concat(g.xZ,"&response_type=code&state=").concat(e,"&redirect_uri=").concat(g.G4)},_=function(e,r){return Boolean(S()(e,"session.app.isAuth",!1)&&(r||S()(e,"session.app.dbInfo.id",null)))},T=function(e){var r=S()(e,"session.app.tokenInfo.access_token",null);return"string"==typeof r&&r.length>0?r:null},R=function(e){return _(e)&&S()(e,"session.app.dbInfo.isAdmin",!1)};function O(e,r,t,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,o)}var A=function(e,r){var t=r.code;return{client_id:g.xZ,client_secret:g.X,code:t,redirect_uri:g.G4}},N=function(){var e,r=(e=regeneratorRuntime.mark((function e(r,t){var n,o,a,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S()(r,"query.code",null),o=S()(r,"query.state",null),a=S()(r,"params.oauth",null),i=S()(r,"session.app.oauthState",null),!n||!o||o!==i){e.next=14;break}return console.log("redirected by ".concat(a," auth...")),s=A(0,r.query),e.next=9,u=s,L()({baseURL:g.G,method:"get",url:"/oauth/access_token",params:u});case 9:c=e.sent,(l=c.data).access_token?r.session.app={oauth:a,isAuth:!0,tokenInfo:l}:r.session.app={isAuth:!1,authError:"get token failed."},e.next=16;break;case 14:console.log("inconsistant session, error msg in session"),r.session.app={isAuth:!1,authError:"Sorry, something error, please try again."};case 16:t.redirect("/");case 17:case"end":return e.stop()}var u}),e)})),function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function i(e){O(a,n,o,i,s,"next",e)}function s(e){O(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),q=t(622),D=t.n(q)().resolve(process.cwd(),"".concat(g.e8,"/error.html"));const P=require("csurf");var M=void 0,B=t.n(P)()();const U=require("express-graphql"),F=require("graphql"),J=require("mysql");var H=t.n(J),Q=process.env,G=Q.SQL_HOST,W=Q.SQL_PORT,V=Q.SQL_USERNAME,z=Q.SQL_PASSWORD,X=Q.SQL_DATABASE,Y=H().createPool({connectionLimit:4,multipleStatements:!1,host:G,port:W,user:V,password:z,database:X});Y.query("SELECT 1 + 1 AS solution",(function(e,r){(e||2!==r[0].solution)&&(console.error(e),process.exit(1)),console.log("MySQL connect successfully.")}));const $=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(t,n){Y.query(e,r,(function(e,r){e?(console.error(e),n(e)):t(r)}))}))};function Z(e,r,t,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,o)}function K(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function i(e){Z(a,n,o,i,s,"next",e)}function s(e){Z(a,n,o,i,s,"throw",e)}i(void 0)}))}}const ee={user:function(e,r){return K(regeneratorRuntime.mark((function e(){var t,n,o,a,i,s,c,l,u,d,p,f,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T(r),!_(r,!0)||!t){e.next=36;break}return n={access_token:t,fields:"id,name,picture"},e.prev=3,e.next=6,v=n,L()({baseURL:g.G,method:"get",url:"/me",params:v});case 6:return o=e.sent,a=o.data,i=a.name,s=a.id,e.next=11,$("SELECT * FROM colorpk_user WHERE oauth = 'fb' AND oauth_id = ?",[s]);case 11:if(1!==(c=e.sent).length){e.next=23;break}return l=c[0],u=l.is_admin,d=l.id,r.session.app.dbInfo={id:d,name:i,isAdmin:u||!1},e.next=17,$("SELECT color_id FROM colorpk_userlike WHERE user_id= ?",[d]);case 17:return p=e.sent,e.next=20,$("SELECT a.id FROM colorpk_color a WHERE a.user_id=?",[d]);case 20:return f=e.sent,$("UPDATE colorpk_user SET last_login=NOW() WHERE id=?",[d]),e.abrupt("return",{name:i,isAdmin:u||!1,img:S()(a,"picture.data.url",null),likes:p.map((function(e){return e.color_id})),owns:f.map((function(e){return e.id}))});case 23:return e.next=25,$("INSERT INTO colorpk_user (oauth, name, oauth_id, last_login) VALUES ('fb', ?, ?, NOW())",[i,s]);case 25:return m=e.sent,h=m.insertId,r.session.app.dbInfo={id:h,name:i,isAdmin:!1},e.abrupt("return",{name:i,isAdmin:!1,img:S()(a,"picture.data.url",null),likes:[],owns:[]});case 31:return e.prev=31,e.t0=e.catch(3),e.abrupt("return",new F.GraphQLError(e.t0.toString()));case 34:e.next=37;break;case 36:return e.abrupt("return",null);case 37:case"end":return e.stop()}var v}),e,null,[[3,31]])})))()},color:function(e,r){return K(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.category,R(r)||"ANONYMOUS"!==n){t.next=3;break}return t.abrupt("return",new F.GraphQLError("color error: no admin access"));case 3:o=null,t.t0=n,t.next="PUBLIC"===t.t0?7:"ANONYMOUS"===t.t0?11:15;break;case 7:return t.next=9,$("SELECT a.* FROM colorpk_color a WHERE a.display=0 ORDER BY `id` DESC");case 9:return o=t.sent,t.abrupt("break",16);case 11:return t.next=13,$("SELECT * FROM colorpk_color a WHERE a.display = 1");case 13:return o=t.sent,t.abrupt("break",16);case 15:return t.abrupt("break",16);case 16:return t.prev=16,t.abrupt("return",o.map((function(e){return{id:e.id,star:e.star,color:e.color,userId:e.user_id,username:e.username,createdDate:e.created_date}})));case 20:return t.prev=20,t.t1=t.catch(16),t.abrupt("return",new F.GraphQLError(t.t1.toString()));case 23:case"end":return t.stop()}}),t,null,[[16,20]])})))()},likeColor:function(e,r){return K(regeneratorRuntime.mark((function t(){var n,o,a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.input,o=n.id,a=n.willLike,t.prev=2,_(r)&&(i=S()(r,"session.app.dbInfo.id",null),$(a?"INSERT INTO colorpk_userlike (user_id, color_id) VALUES (?, ?)":"DELETE FROM colorpk_userlike WHERE user_id= ? AND color_id = ?",[i,o])),!a){t.next=9;break}return t.next=7,$("UPDATE colorpk_color SET `star` = `star` + 1 WHERE id = ?",[o]);case 7:return s=t.sent,t.abrupt("return",{status:1===s.affectedRows?0:1});case 9:return t.abrupt("return",{status:0});case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",new F.GraphQLError(t.t0.toString()));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},createColor:function(e,r){return K(regeneratorRuntime.mark((function t(){var n,o,a,i,s,c,l,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.input,o=n.color,function(e){return/^(#[a-f0-9]{6}){4}$/.test(e)}(p="#".concat(o))&&function(e){var r={cnt:0},t=[e.substring(0,7),e.substring(7,14),e.substring(14,21),e.substring(21)];return t.forEach((function(e){Object.prototype.hasOwnProperty.call(r,e)||(r[e]=!0,r.cnt+=1)})),r.cnt===t.length}(p)){t.next=4;break}return t.abrupt("return",new F.GraphQLError("create error: invalid color input"));case 4:return a=S()(r,"session.app.dbInfo.name",null),i=S()(r,"session.app.dbInfo.id",null),s=_(r)&&a,c=s?a:null,l=s?i:null,u=(20*Math.random()).toFixed(),t.prev=10,t.next=13,$("INSERT INTO colorpk_color (`star`, color, user_id, username, color_type, display, created_date) VALUES (?, ?, ?, ?, NULL, ?, NOW())",[u,o,l,c,s?0:1]);case 13:return d=t.sent,t.abrupt("return",{status:0,data:d.insertId});case 17:return t.prev=17,t.t0=t.catch(10),t.abrupt("return",new F.GraphQLError(t.t0.toString()));case 20:case"end":return t.stop()}var p}),t,null,[[10,17]])})))()},adjudicateColor:function(e,r){return K(regeneratorRuntime.mark((function t(){var n,o,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.input,R(r)){t.next=3;break}return t.abrupt("return",new F.GraphQLError("adjudicate error: no admin access"));case 3:return o=n.id,a=n.willLike,t.prev=4,t.next=7,$(a?"UPDATE colorpk_color SET `display` = 0 WHERE id = ?":"DELETE FROM colorpk_color WHERE id = ?",[o]);case 7:return i=t.sent,t.abrupt("return",{status:1===i.affectedRows?0:1});case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",new F.GraphQLError(t.t0.toString()));case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()}},re=(0,F.buildSchema)("\n  enum ColorCategory {\n    PUBLIC\n    ANONYMOUS\n  }\n\n  interface MutationResponse {\n    status: Int!\n  }\n\n  type Color {\n    id: ID!\n    star: Int!\n    color: String!\n    userId: ID\n    username: String\n    createdDate: String\n  }\n\n  type User {\n    img: String\n    isAdmin: Boolean\n    name: String\n    likes: [ID!]\n    owns: [ID!]\n  }\n\n  input LikeColorInputType {\n    id: ID!\n    willLike: Boolean!\n  }\n  \n  input CreateColorInputType {\n    color: String!\n  }\n\n  type LikeColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type AdjudicateColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type CreateColorOutputType implements MutationResponse {\n    status: Int!\n    data: ID!\n  }\n\n  type Mutation {\n    likeColor(input: LikeColorInputType!): LikeColorOutputType\n    createColor(input: CreateColorInputType!): CreateColorOutputType\n    adjudicateColor(input: LikeColorInputType!): AdjudicateColorOutputType\n  }\n  \n  type Query {\n    color(category: ColorCategory!): [Color]\n    user: User\n  }\n\n  schema {\n    query: Query\n    mutation: Mutation\n  } \n"),te=(0,U.graphqlHTTP)({schema:re,rootValue:ee,graphiql:!1,pretty:!1});var ne=t(856);const oe=require("react-redux"),ae=require("react-router"),ie=require("redux"),se=require("react-dom/server");var ce=t(991);const le=require("prop-types");var ue=t.n(le);const de=require("react"),pe=require("react/jsx-runtime");var fe="ColorPK v1",me="colorpk",ge="Your Best Color Picker | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计",he="https://repository-images.githubusercontent.com/75897824/b1278e80-8704-11ea-9acf-ac166e4ad4fd";const ve=function(){return(0,pe.jsxs)(de.Fragment,{children:[(0,pe.jsx)("meta",{property:"og:title",content:fe}),(0,pe.jsx)("meta",{property:"og:type",content:"website"}),(0,pe.jsx)("meta",{property:"og:url",content:"https://react.colorpk.com"}),(0,pe.jsx)("meta",{property:"og:description",content:ge}),(0,pe.jsx)("meta",{property:"og:site_name",content:me}),(0,pe.jsx)("meta",{property:"og:image",content:he}),(0,pe.jsx)("meta",{property:"og:image:secure_url",content:he}),(0,pe.jsx)("meta",{property:"og:image:type",content:"image/png"}),(0,pe.jsx)("meta",{property:"og:image:width",content:1280}),(0,pe.jsx)("meta",{property:"og:image:height",content:640}),(0,pe.jsx)("meta",{property:"og:image:alt",content:me}),(0,pe.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,pe.jsx)("meta",{name:"twitter:site",content:me}),(0,pe.jsx)("meta",{name:"twitter:title",content:fe}),(0,pe.jsx)("meta",{name:"twitter:description",content:ge}),(0,pe.jsx)("meta",{name:"twitter:image",content:he}),(0,pe.jsx)("meta",{name:"twitter:image:width",content:1280}),(0,pe.jsx)("meta",{name:"twitter:image:height",content:640}),(0,pe.jsx)("meta",{name:"twitter:image:alt",content:me})]})},be=require("serialize-javascript");var ye=t.n(be),xe=function(e){var r=e.title,t=e.style,n=e.script,o=e.children,a=e.csrfToken,i=e.isVertical,s=e.languageCode,c=e.lastBuildDate,l=e.initState;return(0,pe.jsxs)("html",{lang:"en",children:[(0,pe.jsxs)("head",{children:[(0,pe.jsx)("meta",{charSet:"utf-8"}),(0,pe.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,pe.jsx)(ve,{}),(0,pe.jsx)("title",{children:r}),(0,pe.jsx)("meta",{name:"description",content:"ColorPK | Faster lighter and nicer than colorhunt | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),(0,pe.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),(0,pe.jsx)("meta",{name:"robots",content:"INDEX,FOLLOW"}),(0,pe.jsx)("meta",{name:"keywords",content:"colorpk, colorpicker, color picker, palette, color combination"}),(0,pe.jsx)("link",{rel:"shortcut icon",href:"//dkny.oss-cn-hangzhou.aliyuncs.com/3/fav.ico"}),(0,pe.jsx)("link",{href:t,rel:"stylesheet"}),(0,pe.jsx)("script",{dangerouslySetInnerHTML:{__html:"if(window.location.hostname.indexOf('colorpk.com') > -1){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5LX6LV3');} var initLoadTime = Date.now();window.addEventListener('_COLORPK_SCRIPT_READY', function(){window.dataLayer.push({'scriptLoadingTime': Date.now() - initLoadTime});console.log('server last build: ".concat(c,"');});\n          ")}})]}),(0,pe.jsxs)("body",{children:[(0,pe.jsx)("noscript",{children:(0,pe.jsx)("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-5LX6LV3",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),(0,pe.jsx)("div",{id:"app",dangerouslySetInnerHTML:{__html:o}}),(0,pe.jsx)("div",{id:ce.yY}),(0,pe.jsx)("div",{id:"csrf","data-token":a}),(0,pe.jsx)("script",{dangerouslySetInnerHTML:{__html:"window.".concat(ce.kl,"=").concat(ye()(l),"; window.").concat(ce.CT,'="').concat(s,'"; window.').concat(ce.jl,"=").concat(i,"; ")}}),(0,pe.jsx)("script",{src:n,type:"text/javascript"})]})]})};xe.propTypes={title:ue().string.isRequired,isVertical:ue().bool.isRequired,languageCode:ue().string.isRequired,lastBuildDate:ue().string.isRequired,style:ue().string.isRequired,script:ue().string.isRequired,children:ue().string.isRequired,csrfToken:ue().string.isRequired,initState:ue().object.isRequired};const we=xe;var ke=t(116);const je=require("react-router-dom"),Se=function(){return(0,pe.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",children:[(0,pe.jsx)("title",{children:"translation"}),(0,pe.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,pe.jsx)("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "})]})};var Ce=function(e){var r=e.languages,t=e.onChange;return(0,pe.jsx)("div",{className:"navbar-dropdown",children:r.map((function(e){return(0,pe.jsx)("a",{className:"navbar-item",onClick:function(){t(e.code)},children:e.name},e.code)}))})};Ce.propTypes={onChange:ue().func.isRequired,languages:ue().array.isRequired};const Ee=Ce;var Le=function(e){var r=e.onClick;return(0,pe.jsxs)("a",{role:"nav toggle btn",className:"navbar-burger burger","aria-label":"nav menu","aria-expanded":"false",onClick:r,children:[(0,pe.jsx)("span",{"aria-hidden":"true"}),(0,pe.jsx)("span",{"aria-hidden":"true"}),(0,pe.jsx)("span",{"aria-hidden":"true"})]})};Le.propTypes={onClick:ue().func.isRequired};const Ie=Le;var _e=[],Te={},Re={};function Oe(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}[{code:"en",name:"English",data:{language:"Language",popular:"Popular",latest:"Latest",more:"More",about:"About",newColor:"New Color",fbLogin:"Facebook Login",reportIssue:"Report an issue",download:"Download",submit:"Submit",reset:"Reset",return:"Return",profile:"Profile",like:"Like",admin:"Admin",logOut:"Log Out",facebook:"FaceBook",twitter:"Twitter",email:"E-Mail",noColorsToShow:"No colors to display",undefinedColorId:"Color ID is not defined"}},{code:"zh",name:"简体中文",data:{language:"多语言",popular:"最热",latest:"最新",more:"更多",about:"关于",newColor:"创建新颜色",fbLogin:"脸书账号登陆",reportIssue:"报告错误",download:"下载",submit:"添加",reset:"重置",return:"返回",profile:"我的颜色",like:"我的收藏",admin:"管理员",logOut:"注销",facebook:"脸书",twitter:"推特",email:"电邮",noColorsToShow:"没有可以显示的颜色",undefinedColorId:"颜色ID未定义"}},{code:"ja",name:"日本語",data:{language:"言語",popular:"人気のある",latest:"最新",more:"もっと",about:"約",newColor:"色をつくる",fbLogin:"Facebookでログイン",reportIssue:"問題を報告する",download:"ダウンロード",submit:"提出する",reset:"リセット",return:"戻る",profile:"プロフィール",like:"好む",admin:"管理者",logOut:"サインアウト",facebook:"FaceBook",twitter:"さえずり",email:"Eメール",noColorsToShow:"表示する色がありません",undefinedColorId:"IDが定義されていません"}},{code:"ko",name:"한국어",data:{language:"언어",popular:"인기 있는",latest:"최근",more:"더",about:"약",newColor:"몹시 떠들어 대다",fbLogin:"페이스 북 로그인",reportIssue:"보고 문제",download:"다운로드",submit:"제출하다",reset:"다시 놓기",return:"반환",profile:"윤곽",like:"인기 있는 말",admin:"관리자",logOut:"로그 아웃하다",facebook:"페이스 북",twitter:"지저귀다",email:"이메일",noColorsToShow:"표시 할 색상이 없습니다",undefinedColorId:"ID가 정의되지 않았습니다"}},{code:"es",name:"Español",data:{language:"idioma",popular:"popular",latest:"más reciente",more:"Más",about:"acerca de",newColor:"crear nuevo",fbLogin:"cuenta de Facebook",reportIssue:"informe de problema",download:"descargar",submit:"enviar",reset:"Reiniciar",return:"regreso",profile:"perfil",like:"favorita",admin:"administración",logOut:"cerrar sesión",facebook:"Facebook",twitter:"gorjeo",email:"correo electrónico",noColorsToShow:"No hay color para mostrar",undefinedColorId:"ID no está definido"}},{code:"ru",name:"Русский",data:{language:"Переводы",popular:"популярный",latest:"недавно",more:"Больше",about:"около",newColor:"Создайте",fbLogin:"Логин в фейсбук",reportIssue:"сообщить о проблемах",download:"скачать",submit:"Отправить",reset:"сброс",return:"вернуть",profile:"профиль",like:"любимый",admin:"админ",logOut:"выйти",facebook:"Facebook",twitter:"щебет",email:"Эл. адрес",noColorsToShow:"Нет цвета для отображения",undefinedColorId:"идентификатор не определен"}}].forEach((function(e){_e.push({code:e.code,name:e.name}),Te[e.code]=e.data,Re[e.code]=!0}));var Ae=(0,de.createContext)(),Ne=function(e){var r,t,n=e.children,o=e.initLang,a=e.onChange,i=(r=(0,de.useState)(o),t=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var n,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(r,t)||function(e,r){if(e){if("string"==typeof e)return Oe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Oe(e,r):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[0],c=i[1];return(0,de.useEffect)((function(){a(s)}),[s]),(0,pe.jsx)(Ae.Provider,{value:[Te[s],c],children:n})};Ne.propTypes={children:ue().element.isRequired,initLang:ue().string,onChange:ue().func};function qe(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var n,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return De(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?De(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Pe="Ep_t4",Me=function(e){var r=e.url,t=e.detail,n=e.likeNum,o=e.facebookUrl,a=e.languages,i=e.onLogout,s=qe((0,de.useState)(!1),2),c=s[0],l=s[1],u=qe((0,de.useContext)($e),2),d=u[0],p=u[1],f=qe((0,de.useContext)(Ae),2),m=f[0],g=f[1],h=Boolean(t),v=h&&t.get("isAdmin"),b=h&&t.get("img"),y=b||"".concat(ce.Qi,"/icon.png"),x="/popular"===r,w=["/","/latest"].includes(r),k=["/like","/portfolio"].includes(r),j="/like"===r,S="/new"===r,C=function(){l(!1)},E=function(){l(!1),window.scrollTo(0,0)};return(0,pe.jsxs)("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation",children:[(0,pe.jsxs)("div",{className:"navbar-brand",children:[(0,pe.jsx)("div",{title:"click to rotate","aria-label":"click to rotate",className:"navbar-item ".concat("_3hicd"),onClick:function(){l(!1),p(!d)},children:(0,pe.jsx)("img",{src:y,className:"".concat(b||d?"":"_3NLiw"),alt:"colorpk icon"})}),(0,pe.jsx)(Ie,{onClick:function(){return l((function(e){return!e}))}})]}),(0,pe.jsxs)("div",{className:"navbar-menu ".concat(c?"is-active":""),children:[(0,pe.jsxs)("div",{className:"navbar-start",children:[h?(0,pe.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[(0,pe.jsx)("a",{className:"navbar-link ".concat(k?Pe:""),children:t.get("name")}),(0,pe.jsxs)("div",{className:"navbar-dropdown",children:[(0,pe.jsx)(je.Link,{className:"navbar-item",to:"/portfolio",onClick:E,children:m.profile}),(0,pe.jsx)(je.Link,{to:"/like",className:"navbar-item",onClick:E,children:m.like}),v&&(0,pe.jsx)(je.Link,{to:"/adminpanel",className:"navbar-item",onClick:E,children:m.admin})]})]}):(0,pe.jsxs)(je.Link,{to:"/like",className:"navbar-item ".concat(j?Pe:""),onClick:E,children:[m.like,n>0&&" (".concat(n,")")]}),(0,pe.jsx)(je.Link,{to:"/popular",className:"navbar-item ".concat(x?Pe:""),onClick:C,children:m.popular}),(0,pe.jsx)(je.Link,{to:"/latest",className:"navbar-item ".concat(w?Pe:""),onClick:C,children:m.latest}),(0,pe.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable ".concat("_2y9XT"),children:[(0,pe.jsx)("a",{className:"navbar-link",children:m.more}),(0,pe.jsxs)("div",{className:"navbar-dropdown",children:[(0,pe.jsx)("a",{className:"navbar-item",href:"//www.colorpk.com",children:"ColorPK v2.0"}),(0,pe.jsx)("a",{className:"navbar-item",href:"//www.colorpk.com/about",children:m.about}),(0,pe.jsx)("hr",{className:"navbar-divider"}),(0,pe.jsx)("a",{className:"navbar-item",href:"//github.com/im6/vp/issues",children:m.reportIssue})]})]}),(0,pe.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[(0,pe.jsxs)("a",{className:"navbar-link",children:[(0,pe.jsx)(Se,{}),(0,pe.jsx)("span",{className:"rk-VT",children:m.language})]}),(0,pe.jsx)(Ee,{languages:a,onChange:g})]})]}),(0,pe.jsx)("div",{className:"navbar-end",children:(0,pe.jsx)("div",{className:"navbar-item",children:(0,pe.jsxs)("div",{className:"buttons",children:[!S&&(0,pe.jsx)(je.Link,{to:"/new",className:"button is-primary",onClick:E,children:m.newColor}),"  ",h?(0,pe.jsx)(je.Link,{className:"button is-danger",to:"/",onClick:function(){i(),C()},children:m.logOut}):(0,pe.jsx)("a",{className:"button is-info",href:o,children:m.fbLogin})]})})})]})]})};Me.propTypes={url:ue().string,detail:ue().object,facebookUrl:ue().string,likeNum:ue().number,languages:ue().array.isRequired,onLogout:ue().func.isRequired};const Be=Me,Ue=(0,je.withRouter)((0,oe.connect)((function(e,r){var t=e.user,n=e.color,o=r.location.pathname,a=t.get("detail"),i=t.get("facebookUrl");return{url:o,detail:a,likeNum:n.get("liked").size,languages:_e,facebookUrl:i}}),(function(e){return{onLogout:function(){var r=(0,ke.createAction)("user/logoff");e(r());var t=(0,ke.createAction)("modal/user/logoff");e(t())}}}))(Be));var Fe=function(){return(0,pe.jsx)("div",{className:"spinContainer",children:(0,pe.jsx)("div",{className:"spinLoader"})})};const Je=(0,de.memo)(Fe);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e,r){return(Ge=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function We(e,r){return!r||"object"!==He(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ge(e,r)}(i,e);var r,t,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ve(n);if(o){var t=Ve(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return We(this,e)});function i(e){var r;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),(r=a.call(this,e)).state={loading:!0},r}return r=i,(t=[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){var e=this.state.loading,r=this.props.children;return(0,pe.jsxs)("div",{className:"_22ytu",children:[(0,pe.jsx)(Ue,{}),e?(0,pe.jsx)(Je,{}):r]})}}])&&Qe(r.prototype,t),i}(de.Component);ze.propTypes={children:ue().node};const Xe=ze;function Ye(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var $e=(0,de.createContext)(),Ze=function(e){var r,t,n=e.children,o=e.initVertical,a=e.onChange,i=(r=(0,de.useState)(o),t=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var n,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(r,t)||function(e,r){if(e){if("string"==typeof e)return Ye(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ye(e,r):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[0],c=i[1];return(0,de.useEffect)((function(){a(s?"1":"0")}),[s]),(0,pe.jsx)($e.Provider,{value:[s,c],children:(0,pe.jsx)(Xe,{children:n})})};Ze.propTypes={children:ue().node,initVertical:ue().bool,onChange:ue().func};var Ke=t(758);const er=Ke.keys().reduce((function(e,r){return e[r.replace(/\.js$/,"").replace(/^.\//,"")]=Ke(r).default,e}),{}),rr=function(e,r){var t,n=_(e,!0),o=e.cookies[ce.CT],a=e.cookies[ce.jl],i=o&&Re[o]?o:ce.$q,s=["0","1"].includes(a)?"1"===a:ce.ZA;if(n)t={loading:!0,detail:{name:"loading",isAdmin:R(e)}};else{var c=(0,C.v1)();e.session.app={oauthState:c},t={loading:!0,detail:null,facebookUrl:I(c)}}var l=(0,ie.createStore)((0,ie.combineReducers)(er),{user:(0,ne.fromJS)(t),color:(0,ne.fromJS)({loading:!0,colorDef:{},liked:{},colorIdAllByDate:[],colorIdAllByStar:[],colorIdByMyOwn:[]})}),u=(0,pe.jsx)(ae.StaticRouter,{location:e.url,children:(0,pe.jsx)(oe.Provider,{store:l,children:(0,pe.jsx)(Ne,{initLang:i,children:(0,pe.jsx)(Ze,{initVertical:s})})})}),d=(0,pe.jsx)(we,{title:"".concat("ColorPK | Your Best Color Picker"),languageCode:i,isVertical:s,style:"".concat(g._7,"/main.css"),script:"".concat(g._7,"/main.js"),csrfToken:e.csrfToken(),lastBuildDate:"5/25/2021, 2:22:53 PM EST",initState:l.getState(),children:(0,se.renderToString)(u)}),p=(0,se.renderToStaticMarkup)(d);r.status(200),r.send("<!DOCTYPE html>".concat(p))};var tr=a()();tr.set("trust proxy",!0),tr.use(n()({contentSecurityPolicy:!1})),tr.use((0,i.json)()),tr.use((0,i.urlencoded)({extended:!1})),tr.use(c()()),tr.use(k);var nr=t(619).Z;g.TM.forEach((function(e){tr.get(e,nr)})),tr.get("/_ah/:action",(function(e,r){var t=e.params.action;r.json({status:"".concat(t," - ok")})})),tr.use((function(){for(var e=M,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];S()(t[0],"body._csrf",null)===g.Mh?(console.log("csrf exception"),t[2]()):B.apply(e,t)})),tr.post("/graphql",te),tr.get("/auth/logout",(function(e,r){var t=S()(e,"session.app.dbInfo.name","unknown");console.log("logoff (".concat(t,"), delete session")),delete e.session.app;var n=(0,C.v1)();e.session.app={oauthState:n},r.json({url:I(n)})})),tr.get("/auth/:oauth",N),["/","/latest","/popular","/color/:id","/new","/like"].forEach((function(e){tr.get(e,rr)})),tr.get("/portfolio",(function(e,r,t){_(e)?t():t(401)}),rr),tr.get("/adminpanel",(function(e,r,t){R(e)?t():t(403)}),rr),tr.use((function(e,r){console.error("Error: 404, ".concat(e.url," not found")),r.status(400).sendFile(D)})),tr.use((function(e,r,t,n){console.error("Error: ".concat(e.toString(),", ").concat(r.url)),"POST"===r.method?t.status(400).json({errors:!0}):t.status(400).sendFile(D)})),tr.listen(g.px,(function(){return console.log("app (mode: ".concat("production",") is running on: http://localhost:").concat(g.px))})).timeout=5e3,(0,e.exec)("curl ifconfig.me",(function(e,r,t){e?console.error(t):console.log("public IP addr: ".concat(r))}))})()})();