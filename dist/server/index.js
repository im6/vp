!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}([function(e,t){e.exports=require("react/jsx-runtime.js")},function(e,t){e.exports=require("prop-types")},function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"j",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return m}));var r=n(5);var o=process.env,a=o.PORT,i=o.SESSION_SECRET,c=o.CSRF_EXCEPTION,s=o.FB_APP_KEY,u=o.FB_APP_SECRET,l=o.FB_REDIRECT_URL,d="https://graph.facebook.com/v3.3",p=r.c,f="./".concat("dist","/server"),m=["/robots.txt","/sitemap.xml","/favicon.ico"];c||console.log("No CSRF exception defined"),a||(console.error("No port defined."),process.exit(1))},function(e,t){e.exports=require("immutable")},function(e,t){e.exports=require("lodash.get")},function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d}));var r=n(24),o="temp",a="en",i=!0,c="//dkny.oss-cn-hangzhou.aliyuncs.com/2",s="https://cdn.jsdelivr.net/gh/im6/vp@v".concat(r.a,"/dist/public"),u="canvas",l="lang",d="_REDUXSTATE_"},function(e,t){e.exports=require("redux-actions")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("redis")},function(e,t){e.exports=require("connect-redis")},function(e){e.exports=JSON.parse('{"a":"1.24.0"}')},function(e,t){e.exports=require("csurf")},function(e,t){e.exports=require("express-graphql")},function(e,t){e.exports=require("mysql")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t,n){var r={"./admin.js":32,"./color.js":33,"./modal.js":34,"./user.js":35};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=31},function(e,t,n){"use strict";n.r(t);var r,o=n(6),a=n(3),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=i.a.fromJS({list:[],loading:!1}),u=Object(o.handleActions)((c(r={},"admin/getList",(function(e){return e.set("loading",!0)})),c(r,"admin/getList/success",(function(e,t){return e.merge({loading:!1,list:i.a.fromJS(t.payload)})})),c(r,"admin/getList/fail",(function(e){return e.merge({list:i.a.fromJS([]),loading:!1})})),c(r,"admin/decideColor",(function(e,t){var n=t.payload;return e.updateIn(["list"],(function(e){return e.filter((function(e){return e.get("id")!==n.id}))}))})),r),s);t.default=u},function(e,t,n){"use strict";n.r(t);var r,o=n(6),a=n(3);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=Object(a.fromJS)({loading:!1,showVertical:!0,colorDef:{},liked:{},colorIdAllByDate:[],colorIdAllByLike:[],colorIdByMyOwn:[]}),s=Object(o.handleActions)((i(r={},"color/get",(function(e){return e.set("loading",!0)})),i(r,"color/get/success",(function(e,t){var n=t.payload,r=Object(a.List)(),o=Object(a.Map)();n.forEach((function(e){r=r.push(e.id),o=o.set(e.id,Object(a.fromJS)(e))}));var i=n.sort((function(e,t){return t.like-e.like})).map((function(e){return e.id}));return e.merge({colorIdAllByDate:r,colorIdAllByLike:Object(a.fromJS)(i),colorDef:o,loading:!1})})),i(r,"color/get/fail",(function(e){return e.merge({colorIdAllByDate:Object(a.List)(),colorIdAllByLike:Object(a.List)(),loading:!1})})),i(r,"color/toggleLike",(function(e,t){var n=t.payload,r=n.willLike,o=n.id;return(r?e.setIn(["liked",o],!0):e.deleteIn(["liked",o])).updateIn(["colorDef",o,"like"],(function(e){return e+(r?1:-1)}))})),i(r,"color/addNew/success",(function(e,t){var n=t.payload,r=n.id,o=e.setIn(["colorDef",r],Object(a.fromJS)(n));return(o=o.update("colorIdAllByDate",(function(e){return e.unshift(r)}))).update("colorIdAllByLike",(function(e){return e.push(r)}))})),i(r,"color/set/likes",(function(e,t){var n=t.payload.reduce((function(e,t){return e.set(t,!0)}),Object(a.Map)());return e.set("liked",n)})),i(r,"color/set/owns",(function(e,t){var n=t.payload;return e.set("colorIdByMyOwn",Object(a.List)(n))})),i(r,"color/setDirection",(function(e,t){var n=t.payload;return e.set("showVertical",n)})),r),c);t.default=s},function(e,t,n){"use strict";n.r(t);var r,o=n(6);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Object(o.handleActions)((a(r={},"modal/admin/getList/fail",(function(e){return{message:"Admin data error",type:"danger",flag:!e.flag}})),a(r,"modal/admin/decideColor/success",(function(e){return{message:"Adjudicate successfully",type:"success",flag:!e.flag}})),a(r,"modal/admin/decideColor/fail",(function(e){return{message:"Adjudicate failed",type:"danger",flag:!e.flag}})),a(r,"modal/color/get/fail",(function(e){return{message:"Get color data error.",type:"danger",flag:!e.flag}})),a(r,"modal/color/copy",(function(e){return{message:"Copy to clipboard successfully",type:"success",flag:!e.flag}})),a(r,"modal/color/addNew/success",(function(e){return{message:"Create color successfully, thanks.",type:"success",flag:!e.flag}})),a(r,"modal/color/addNew/fail",(function(e){return{message:"Create color failed.",type:"danger",flag:!e.flag}})),a(r,"modal/color/addNew/invalid",(function(e){return{message:"Invalid color value.",type:"danger",flag:!e.flag}})),a(r,"modal/color/download",(function(e){return{message:"Downloading ...",type:"link",flag:!e.flag}})),a(r,"modal/user/logoff",(function(e){return{message:"Logout successfully.",type:"info",flag:!e.flag}})),a(r,"modal/user/auth/fail",(function(e){return{message:"Log in failed",type:"danger",flag:!e.flag}})),r),{message:null,type:null,flag:!1});t.default=i},function(e,t,n){"use strict";n.r(t);var r,o=n(6),a=n(3),i=n(5);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=Object(a.fromJS)({detail:null,facebookUrl:null,lang:i.d,loading:!1}),u=Object(o.handleActions)((c(r={},"user/auth",(function(e){return e.merge({loading:!0})})),c(r,"user/auth/success",(function(e,t){var n=t.payload;return e.merge({detail:Object(a.fromJS)(n),loading:!1})})),c(r,"user/auth/fail",(function(e){return e.merge({detail:null,loading:!1})})),c(r,"user/logoff",(function(e){return e.merge({detail:null})})),c(r,"user/logoff/success",(function(e,t){var n=t.payload;return e.merge({facebookUrl:n})})),c(r,"user/setLanguage",(function(e,t){var n=t.payload;return e.set("lang",n)})),r),s);t.default=u},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),a=n(2),i=a.h.reduce((function(e,t){return e[t]=!0,e}),{});t.default=function(e,t,n){var r=e.url;if(Object.prototype.hasOwnProperty.call(i,r)){var c=o.a.resolve(process.cwd(),"".concat(a.i).concat(r));t.sendFile(c)}else n(404)}},function(e,t,n){"use strict";n.r(t);var r=n(18),o=(n(30),n(19)),a=n.n(o),i=n(20),c=n.n(i),s=n(13),u=n.n(s),l=n(21),d=n.n(l),p=n(22),f=n.n(p),m=n(14),b=n.n(m),g=n(23),j=n.n(g),h=n(2),v=process.env,y=v.REDIS_HOST,O=v.REDIS_PORT,x=v.REDIS_PASSWORD;y&&O&&x||(console.error("missing redis connection info"),process.exit(1));var k=j()(b.a),w=f.a.createClient({host:y,port:O,password:x,prefix:"vp:"});w.on("error",(function(e){console.error(e),process.exit(1)})),w.on("reconnecting",(function(e,t){console.log("reconnecting, attempt: ".concat(t))})),w.on("connect",(function(){console.log("Redis connect successfully.")}));var S=b()({store:new k({client:w}),secret:h.j,resave:!1,saveUninitialized:!1}),C=n(4),L=n.n(C),E=n(11),R=n(15),I=n.n(R),T=function(e){return"https://www.facebook.com/v3.3/dialog/oauth?client_id=".concat(h.c,"&response_type=code&state=").concat(e,"&redirect_uri=").concat(h.e)},_=function(e,t){return Boolean(L()(e,"session.app.isAuth",!1)&&(t||L()(e,"session.app.dbInfo.id",null)))},N=function(e){var t=L()(e,"session.app.tokenInfo.access_token",null);return"string"==typeof t&&t.length>0?t:null},P=function(e){return _(e)&&L()(e,"session.app.dbInfo.isAdmin",!1)};function D(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var A=function(e,t){var n=t.code;return{client_id:h.c,client_secret:h.d,code:n,redirect_uri:h.e}},q=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L()(t,"query.code",null),o=L()(t,"query.state",null),a=L()(t,"params.oauth",null),i=L()(t,"session.app.oauthState",null),!r||!o||o!==i){e.next=14;break}return console.log("redirected by ".concat(a," auth...")),c=A(0,t.query),e.next=9,l=c,I()({baseURL:h.b,method:"get",url:"/oauth/access_token",params:l});case 9:s=e.sent,(u=s.data).access_token?t.session.app={oauth:a,isAuth:!0,tokenInfo:u}:t.session.app={isAuth:!1,authError:"get token failed."},e.next=16;break;case 14:console.log("inconsistant session, error msg in session"),t.session.app={isAuth:!1,authError:"Sorry, something error, please try again."};case 16:n.redirect("/");case 17:case"end":return e.stop()}var l}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){D(a,r,o,i,c,"next",e)}function c(e){D(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),M=n(12),B=n.n(M).a.resolve(process.cwd(),"".concat(h.i,"/error.html")),U=n(25),F=n.n(U)()(),H=n(26),W=n(8),Q=n(27),V=n.n(Q),J=process.env,G=J.SQL_HOST,z=J.SQL_PORT,Y=J.SQL_USERNAME,K=J.SQL_PASSWORD,X=J.SQL_DATABASE,$=V.a.createPool({connectionLimit:4,multipleStatements:!1,host:G,port:z,user:Y,password:K,database:X});$.query("SELECT 1 + 1 AS solution",(function(e,t){(e||2!==t[0].solution)&&(console.error(e),process.exit(1)),console.log("MySQL connect successfully.")}));var Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(n,r){$.query(e,t,(function(e,t){e?(console.error(e),r(e)):n(t)}))}))},ee=function(e){return function(e){return/^(#[a-f0-9]{6}){4}$/.test(e)}(e)&&function(e){var t={cnt:0},n=[e.substring(0,7),e.substring(7,14),e.substring(14,21),e.substring(21)];return n.forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)||(t[e]=!0,t.cnt+=1)})),t.cnt===n.length}(e)};function te(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,c,"next",e)}function c(e){te(a,r,o,i,c,"throw",e)}i(void 0)}))}}var re={user:function(e,t){return ne(regeneratorRuntime.mark((function e(){var n,r,o,a,i,c,s,u,l,d,p,f,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N(t),!_(t,!0)||!n){e.next=36;break}return r={access_token:n,fields:"id,name,picture"},e.prev=3,e.next=6,g=r,I()({baseURL:h.b,method:"get",url:"/me",params:g});case 6:return o=e.sent,a=o.data,i=a.name,c=a.id,e.next=11,Z("SELECT * FROM colorpk_user WHERE oauth = 'fb' AND oauthid = ?",[c]);case 11:if(1!==(s=e.sent).length){e.next=23;break}return u=s[0],l=u.isadmin,d=u.id,t.session.app.dbInfo={id:d,name:i,isAdmin:l||!1},e.next=17,Z("SELECT color_id FROM colorpk_userlike WHERE user_id= ?",[d]);case 17:return p=e.sent,e.next=20,Z("SELECT a.id FROM colorpk_color a WHERE a.userid=?",[d]);case 20:return f=e.sent,Z("UPDATE colorpk_user SET lastlogin=NOW() WHERE id=?",[d]),e.abrupt("return",{name:i,isadmin:l,img:L()(a,"picture.data.url",null),likes:p.map((function(e){return e.color_id})),owns:f.map((function(e){return e.id}))});case 23:return e.next=25,Z("INSERT INTO colorpk_user (oauth, name, oauthid, lastlogin) VALUES ('fb', ?, ?, NOW())",[i,c]);case 25:return m=e.sent,b=m.insertId,t.session.app.dbInfo={id:b,name:i,isAdmin:!1},e.abrupt("return",{name:i,isadmin:!1,img:L()(a,"picture.data.url",null),likes:[],owns:[]});case 31:return e.prev=31,e.t0=e.catch(3),e.abrupt("return",new W.GraphQLError(e.t0.toString()));case 34:e.next=37;break;case 36:return e.abrupt("return",null);case 37:case"end":return e.stop()}var g}),e,null,[[3,31]])})))()},color:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.category,P(t)||"ANONYMOUS"!==r){n.next=3;break}return n.abrupt("return",new W.GraphQLError("color error: no admin access"));case 3:o=null,n.t0=r,n.next="PUBLIC"===n.t0?7:"ANONYMOUS"===n.t0?11:15;break;case 7:return n.next=9,Z("SELECT a.* FROM colorpk_color a WHERE a.display=0 ORDER BY `id` DESC");case 9:return o=n.sent,n.abrupt("break",16);case 11:return n.next=13,Z("SELECT * FROM colorpk_color a WHERE a.display = 1");case 13:return o=n.sent,n.abrupt("break",16);case 15:return n.abrupt("break",16);case 16:return n.prev=16,n.abrupt("return",o.map((function(e){return{id:e.id,like:e.like,color:e.color,userid:e.userid,username:e.username,createdate:e.createdate}})));case 20:return n.prev=20,n.t1=n.catch(16),n.abrupt("return",new W.GraphQLError(n.t1.toString()));case 23:case"end":return n.stop()}}),n,null,[[16,20]])})))()},likeColor:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o,a,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.input,o=r.id,a=r.willLike,n.prev=2,_(t)&&(i=L()(t,"session.app.dbInfo.id",null),Z(a?"INSERT INTO colorpk_userlike (user_id, color_id) VALUES (?, ?)":"DELETE FROM colorpk_userlike WHERE user_id= ? AND color_id = ?",[i,o])),!a){n.next=9;break}return n.next=7,Z("UPDATE colorpk_color SET `like` = `like` + 1 WHERE id = ?",[o]);case 7:return c=n.sent,n.abrupt("return",{status:1===c.affectedRows?0:1});case 9:return n.abrupt("return",{status:0});case 12:return n.prev=12,n.t0=n.catch(2),n.abrupt("return",new W.GraphQLError(n.t0.toString()));case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},createColor:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o,a,i,c,s,u,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.input,o=r.color,ee("#".concat(o))){n.next=4;break}return n.abrupt("return",new W.GraphQLError("create error: invalid color input"));case 4:return a=L()(t,"session.app.dbInfo.name",null),i=L()(t,"session.app.dbInfo.id",null),c=_(t)&&a,s=c?a:null,u=c?i:null,l=(20*Math.random()).toFixed(),n.prev=10,n.next=13,Z("INSERT INTO colorpk_color (`like`, color, userid, username, colortype, display, createdate) VALUES (?, ?, ?, ?, NULL, ?, NOW())",[l,o,u,s,c?0:1]);case 13:return d=n.sent,n.abrupt("return",{status:0,data:d.insertId});case 17:return n.prev=17,n.t0=n.catch(10),n.abrupt("return",new W.GraphQLError(n.t0.toString()));case 20:case"end":return n.stop()}}),n,null,[[10,17]])})))()},adjudicateColor:function(e,t){return ne(regeneratorRuntime.mark((function n(){var r,o,a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.input,P(t)){n.next=3;break}return n.abrupt("return",new W.GraphQLError("adjudicate error: no admin access"));case 3:return o=r.id,a=r.willLike,n.prev=4,n.next=7,Z(a?"UPDATE colorpk_color SET `display` = 0 WHERE id = ?":"DELETE FROM colorpk_color WHERE id = ?",[o]);case 7:return i=n.sent,n.abrupt("return",{status:1===i.affectedRows?0:1});case 11:return n.prev=11,n.t0=n.catch(4),n.abrupt("return",new W.GraphQLError(n.t0.toString()));case 14:case"end":return n.stop()}}),n,null,[[4,11]])})))()}},oe=Object(W.buildSchema)("\n  enum ColorCategory {\n    PUBLIC\n    ANONYMOUS\n  }\n\n  interface MutationResponse {\n    status: Int!\n  }\n\n  type Color {\n    id: ID!\n    like: Int!\n    color: String!\n    userid: ID\n    username: String\n    createdate: String\n  }\n\n  type User {\n    img: String\n    isadmin: Boolean\n    name: String\n    likes: [ID!]\n    owns: [ID!]\n  }\n\n  input LikeColorInputType {\n    id: ID!\n    willLike: Boolean!\n  }\n  \n  input CreateColorInputType {\n    color: String!\n  }\n\n  type LikeColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type AdjudicateColorOutputType implements MutationResponse {\n    status: Int!\n  }\n\n  type CreateColorOutputType implements MutationResponse {\n    status: Int!\n    data: ID!\n  }\n\n  type Mutation {\n    likeColor(input: LikeColorInputType!): LikeColorOutputType\n    createColor(input: CreateColorInputType!): CreateColorOutputType\n    adjudicateColor(input: LikeColorInputType!): AdjudicateColorOutputType\n  }\n  \n  type Query {\n    color(category: ColorCategory!): [Color]\n    user: User\n  }\n\n  schema {\n    query: Query\n    mutation: Mutation\n  } \n"),ae=Object(H.graphqlHTTP)({schema:oe,rootValue:re,graphiql:!1,pretty:!1}),ie=n(0),ce=n(3),se=n(10),ue=n(28),le=n(16),de=n(17),pe=n(5),fe=n(1),me=n.n(fe),be=n(7),ge="Your Best Color Picker | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计",je="https://repository-images.githubusercontent.com/75897824/b1278e80-8704-11ea-9acf-ac166e4ad4fd",he=function(){return Object(ie.jsxs)(be.Fragment,{children:[Object(ie.jsx)("meta",{property:"og:title",content:"ColorPK v1"}),Object(ie.jsx)("meta",{property:"og:type",content:"website"}),Object(ie.jsx)("meta",{property:"og:url",content:"https://react.colorpk.com"}),Object(ie.jsx)("meta",{property:"og:description",content:ge}),Object(ie.jsx)("meta",{property:"og:site_name",content:"colorpk"}),Object(ie.jsx)("meta",{property:"og:image",content:je}),Object(ie.jsx)("meta",{property:"og:image:secure_url",content:je}),Object(ie.jsx)("meta",{property:"og:image:type",content:"image/png"}),Object(ie.jsx)("meta",{property:"og:image:width",content:1280}),Object(ie.jsx)("meta",{property:"og:image:height",content:640}),Object(ie.jsx)("meta",{property:"og:image:alt",content:"colorpk"}),Object(ie.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),Object(ie.jsx)("meta",{name:"twitter:site",content:"colorpk"}),Object(ie.jsx)("meta",{name:"twitter:title",content:"ColorPK v1"}),Object(ie.jsx)("meta",{name:"twitter:description",content:ge}),Object(ie.jsx)("meta",{name:"twitter:image",content:je}),Object(ie.jsx)("meta",{name:"twitter:image:width",content:1280}),Object(ie.jsx)("meta",{name:"twitter:image:height",content:640}),Object(ie.jsx)("meta",{name:"twitter:image:alt",content:"colorpk"})]})},ve=n(29),ye=n.n(ve),Oe=function(e){var t=e.title,n=e.style,r=e.script,o=e.children,a=e.csrfToken,i=e.lastBuildDate,c=e.initState;return Object(ie.jsxs)("html",{lang:"en",children:[Object(ie.jsxs)("head",{children:[Object(ie.jsx)("meta",{charSet:"utf-8"}),Object(ie.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),Object(ie.jsx)(he,{}),Object(ie.jsx)("title",{children:t}),Object(ie.jsx)("meta",{name:"description",content:"ColorPK | Faster lighter and nicer than colorhunt | 全球最大色彩搭配网站 | 颜色搭配 | 艺术设计"}),Object(ie.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),Object(ie.jsx)("meta",{name:"robots",content:"INDEX,FOLLOW"}),Object(ie.jsx)("meta",{name:"keywords",content:"colorpk, colorpicker, color picker, palette, color combination"}),Object(ie.jsx)("link",{rel:"shortcut icon",href:"//dkny.oss-cn-hangzhou.aliyuncs.com/3/fav.ico"}),Object(ie.jsx)("link",{href:n,rel:"stylesheet"}),Object(ie.jsx)("script",{dangerouslySetInnerHTML:{__html:"if(window.location.hostname.indexOf('colorpk.com') > -1){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5LX6LV3');} var initLoadTime = Date.now();window.addEventListener('_COLORPK_SCRIPT_READY', function(){window.dataLayer.push({'scriptLoadingTime': Date.now() - initLoadTime});console.log('server last build: ".concat(i,"');});\n          ")}})]}),Object(ie.jsxs)("body",{children:[Object(ie.jsx)("noscript",{children:Object(ie.jsx)("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-5LX6LV3",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),Object(ie.jsx)("div",{id:"app",dangerouslySetInnerHTML:{__html:o}}),Object(ie.jsx)("div",{id:pe.h}),Object(ie.jsx)("div",{id:"csrf","data-token":a}),Object(ie.jsx)("script",{dangerouslySetInnerHTML:{__html:"window.".concat(pe.g,"=").concat(ye()(c),";")}}),Object(ie.jsx)("script",{src:r,type:"text/javascript"})]})]})};Oe.propTypes={title:me.a.string.isRequired,lastBuildDate:me.a.string.isRequired,style:me.a.string.isRequired,script:me.a.string.isRequired,children:me.a.string.isRequired,csrfToken:me.a.string.isRequired,initState:me.a.object.isRequired};var xe=Oe,ke="_22ytu",we=n(6),Se=n(9),Ce="_2Y1gP",Le="_26h5y",Ee="_2V29x",Re="_3dWcT",Ie="_2nmRe",Te=function(){return Object(ie.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",children:[Object(ie.jsx)("title",{children:"translation"}),Object(ie.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(ie.jsx)("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "})]})},_e=function(e){var t=e.languages,n=e.onChange;return Object(ie.jsx)("div",{className:"navbar-dropdown",children:t.map((function(e){return Object(ie.jsx)("a",{className:"navbar-item",onClick:function(){n(e.code)},children:e.name},e.code)}))})};_e.propTypes={onChange:me.a.func.isRequired,languages:me.a.array.isRequired};var Ne=_e,Pe=function(e){var t=e.onClick;return Object(ie.jsxs)("a",{role:"nav toggle btn",className:"navbar-burger burger","aria-label":"nav menu","aria-expanded":"false",onClick:t,children:[Object(ie.jsx)("span",{"aria-hidden":"true"}),Object(ie.jsx)("span",{"aria-hidden":"true"}),Object(ie.jsx)("span",{"aria-hidden":"true"})]})};Pe.propTypes={onClick:me.a.func.isRequired};var De=Pe,Ae=Object(be.createContext)();function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=Ce,Ue=function(e){var t=e.url,n=e.detail,r=e.likeNum,o=e.showVertical,a=e.facebookUrl,i=e.languages,c=e.onLogout,s=e.onChangeLang,u=e.onChangeCanvasDirection,l=qe(Object(be.useState)(!1),2),d=l[0],p=l[1],f=Object(be.useContext)(Ae),m=Boolean(n),b="/popular"===t,g=t in{"/latest":!0,"/":!0},j="/like"===t,h="/new"===t,v=m&&n.get("img"),y=v||"".concat(pe.e,"/icon.png"),O=function(){p(!1)},x=function(){p(!1),window.scrollTo(0,0)};return Object(ie.jsxs)("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation",children:[Object(ie.jsxs)("div",{className:"navbar-brand",children:[Object(ie.jsx)("div",{title:"click to rotate","aria-label":"click to rotate",className:"navbar-item ".concat(Re),onClick:function(){p(!1),u(!o)},children:Object(ie.jsx)("img",{src:y,className:"".concat(v||o?"":Ee),alt:"colorpk icon"})}),Object(ie.jsx)(De,{onClick:function(){return p((function(e){return!e}))}})]}),Object(ie.jsxs)("div",{className:"navbar-menu ".concat(d?"is-active":""),children:[Object(ie.jsxs)("div",{className:"navbar-start",children:[m?Object(ie.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(ie.jsx)("a",{className:"navbar-link ".concat(["/like","/portfolio"].includes(t)?Be:""),children:n.get("name")}),Object(ie.jsxs)("div",{className:"navbar-dropdown",children:[Object(ie.jsx)(Se.Link,{className:"navbar-item",to:"/portfolio",onClick:x,children:f.profile}),Object(ie.jsx)(Se.Link,{to:"/like",className:"navbar-item",onClick:x,children:f.like}),n.get("isadmin")&&Object(ie.jsx)(Se.Link,{to:"/adminpanel",className:"navbar-item",onClick:x,children:f.admin})]})]}):Object(ie.jsxs)(Se.Link,{to:"/like",className:"navbar-item ".concat(j?Be:""),onClick:x,children:[f.like,r>0&&" (".concat(r,")")]}),Object(ie.jsx)(Se.Link,{to:"/popular",className:"navbar-item ".concat(b?Be:""),onClick:O,children:f.popular}),Object(ie.jsx)(Se.Link,{to:"/latest",className:"navbar-item ".concat(g?Be:""),onClick:O,children:f.latest}),Object(ie.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable ".concat(Ie),children:[Object(ie.jsx)("a",{className:"navbar-link",children:f.more}),Object(ie.jsxs)("div",{className:"navbar-dropdown",children:[Object(ie.jsx)("a",{className:"navbar-item",href:"//www.colorpk.com",children:"ColorPK v2.0"}),Object(ie.jsx)("a",{className:"navbar-item",href:"//www.colorpk.com/about",children:f.about}),Object(ie.jsx)("hr",{className:"navbar-divider"}),Object(ie.jsx)("a",{className:"navbar-item",href:"//github.com/im6/vp/issues",children:f.reportIssue})]})]}),Object(ie.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(ie.jsxs)("a",{className:"navbar-link",children:[Object(ie.jsx)(Te,{}),Object(ie.jsx)("span",{className:Le,children:f.language})]}),Object(ie.jsx)(Ne,{languages:i,onChange:s})]})]}),Object(ie.jsx)("div",{className:"navbar-end",children:Object(ie.jsx)("div",{className:"navbar-item",children:Object(ie.jsxs)("div",{className:"buttons",children:[!h&&Object(ie.jsx)(Se.Link,{to:"/new",className:"button is-primary",onClick:x,children:f.newColor}),"  ",m?Object(ie.jsx)(Se.Link,{className:"button is-danger",to:"/",onClick:function(){c(),O()},children:f.logOut}):Object(ie.jsx)("a",{className:"button is-info",href:a,children:f.fbLogin})]})})})]})]})};Ue.propTypes={url:me.a.string,detail:me.a.object,facebookUrl:me.a.string,likeNum:me.a.number,showVertical:me.a.bool,languages:me.a.array.isRequired,onLogout:me.a.func.isRequired,onChangeLang:me.a.func.isRequired,onChangeCanvasDirection:me.a.func.isRequired};var Fe=Ue,He=[],We={},Qe={};[{code:"en",name:"English",data:{language:"Language",popular:"Popular",latest:"Latest",more:"More",about:"About",newColor:"New Color",fbLogin:"Facebook Login",reportIssue:"Report an issue",download:"Download",submit:"Submit",reset:"Reset",return:"Return",profile:"Profile",like:"Like",admin:"Admin",logOut:"Log Out",facebook:"FaceBook",twitter:"Twitter",email:"E-Mail",noColorsToShow:"No colors to display",undefinedColorId:"Color ID is not defined"}},{code:"zh",name:"简体中文",data:{language:"多语言",popular:"最热",latest:"最新",more:"更多",about:"关于",newColor:"创建新颜色",fbLogin:"脸书账号登陆",reportIssue:"报告错误",download:"下载",submit:"添加",reset:"重置",return:"返回",profile:"我的颜色",like:"我的收藏",admin:"管理员",logOut:"注销",facebook:"脸书",twitter:"推特",email:"电邮",noColorsToShow:"没有可以显示的颜色",undefinedColorId:"颜色ID未定义"}},{code:"ja",name:"日本語",data:{language:"言語",popular:"人気のある",latest:"最新",more:"もっと",about:"約",newColor:"色をつくる",fbLogin:"Facebookでログイン",reportIssue:"問題を報告する",download:"ダウンロード",submit:"提出する",reset:"リセット",return:"戻る",profile:"プロフィール",like:"好む",admin:"管理者",logOut:"サインアウト",facebook:"FaceBook",twitter:"さえずり",email:"Eメール",noColorsToShow:"表示する色がありません",undefinedColorId:"IDが定義されていません"}},{code:"ko",name:"한국어",data:{language:"언어",popular:"인기 있는",latest:"최근",more:"더",about:"약",newColor:"몹시 떠들어 대다",fbLogin:"페이스 북 로그인",reportIssue:"보고 문제",download:"다운로드",submit:"제출하다",reset:"다시 놓기",return:"반환",profile:"윤곽",like:"인기 있는 말",admin:"관리자",logOut:"로그 아웃하다",facebook:"페이스 북",twitter:"지저귀다",email:"이메일",noColorsToShow:"표시 할 색상이 없습니다",undefinedColorId:"ID가 정의되지 않았습니다"}},{code:"es",name:"Español",data:{language:"idioma",popular:"popular",latest:"más reciente",more:"Más",about:"acerca de",newColor:"crear nuevo",fbLogin:"cuenta de Facebook",reportIssue:"informe de problema",download:"descargar",submit:"enviar",reset:"Reiniciar",return:"regreso",profile:"perfil",like:"favorita",admin:"administración",logOut:"cerrar sesión",facebook:"Facebook",twitter:"gorjeo",email:"correo electrónico",noColorsToShow:"No hay color para mostrar",undefinedColorId:"ID no está definido"}},{code:"ru",name:"Русский",data:{language:"Переводы",popular:"популярный",latest:"недавно",more:"Больше",about:"около",newColor:"Создайте",fbLogin:"Логин в фейсбук",reportIssue:"сообщить о проблемах",download:"скачать",submit:"Отправить",reset:"сброс",return:"вернуть",profile:"профиль",like:"любимый",admin:"админ",logOut:"выйти",facebook:"Facebook",twitter:"щебет",email:"Эл. адрес",noColorsToShow:"Нет цвета для отображения",undefinedColorId:"идентификатор не определен"}}].forEach((function(e){He.push({code:e.code,name:e.name}),We[e.code]=e.data,Qe[e.code]=!0}));var Ve=Object(Se.withRouter)(Object(se.connect)((function(e,t){var n=e.user,r=e.color,o=t.location.pathname,a=n.get("detail"),i=n.get("facebookUrl"),c=r.get("liked").size,s=r.get("showVertical");return{url:o,detail:a,likeNum:c,languages:He,facebookUrl:i,showVertical:s}}),(function(e){return{onLogout:function(){var t=Object(we.createAction)("user/logoff");e(t());var n=Object(we.createAction)("modal/user/logoff");e(n())},onChangeLang:function(t){var n=Object(we.createAction)("user/setLanguage");e(n(t))},onChangeCanvasDirection:function(t){var n=Object(we.createAction)("color/setDirection");e(n(t))}}}))(Fe)),Je=function(){return Object(ie.jsx)("div",{className:"spinContainer",children:Object(ie.jsx)("div",{className:"spinLoader"})})},Ge=Object(be.memo)(Je);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(a,e);var t,n,r,o=Xe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={loading:!0},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){var e=this.state.loading,t=this.props.children;return Object(ie.jsxs)("div",{className:ke,children:[Object(ie.jsx)(Ve,{}),e?Object(ie.jsx)(Ge,{}):t]})}}])&&Ye(t.prototype,n),r&&Ye(t,r),a}(be.Component);et.propTypes={children:me.a.node};var tt=et,nt=function(e){var t=e.lang,n=e.children;return Object(ie.jsx)(Ae.Provider,{value:We[t],children:n})};nt.propTypes={lang:me.a.string,children:me.a.node};var rt=nt,ot=Object(se.connect)((function(e){return{lang:e.user.get("lang")}}))(rt),at=n(31),it=at.keys().reduce((function(e,t){return e[t.replace(/\.js$/,"").replace(/^.\//,"")]=at(t).default,e}),{});function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lt=function(e,t){var n=_(e,!0),r=e.cookies[pe.f],o={lang:r&&Qe[r]?r:pe.d,loading:!0};if(n)o=st(st({},o),{},{detail:{name:"loading",isadmin:P(e)}});else{var a=Object(E.v1)();e.session.app={oauthState:a},o=st(st({},o),{},{detail:null,facebookUrl:T(a)})}var i=void 0===e.cookies[pe.b]?pe.a:"1"===e.cookies[pe.b],c=Object(le.createStore)(Object(le.combineReducers)(it),{user:Object(ce.fromJS)(o),color:Object(ce.fromJS)({loading:!0,showVertical:i,colorDef:{},liked:{},colorIdAllByDate:[],colorIdAllByLike:[],colorIdByMyOwn:[]})}),s=Object(ie.jsx)(ue.StaticRouter,{location:e.url,children:Object(ie.jsx)(se.Provider,{store:c,children:Object(ie.jsx)(ot,{children:Object(ie.jsx)(tt,{})})})}),u=Object(de.renderToString)(s),l=Object(ie.jsx)(xe,{title:"".concat("ColorPK | Your Best Color Picker"),style:"".concat(h.g,"/main.css"),script:"".concat(h.g,"/main.js"),csrfToken:e.csrfToken(),lastBuildDate:"10/16/2020, 10:56:18 PM EST",initState:c.getState(),children:u}),d=Object(de.renderToStaticMarkup)(l);t.status(200),t.send("<!DOCTYPE html>".concat(d))},dt=c()();dt.set("trust proxy",!0),dt.use(a()({contentSecurityPolicy:!1})),dt.use(u.a.json()),dt.use(u.a.urlencoded({extended:!1})),dt.use(d()()),dt.use(S);var pt=n(36).default;h.h.forEach((function(e){dt.get(e,pt)})),dt.get("/_ah/:action",(function(e,t){var n=e.params.action;t.json({status:"".concat(n," - ok")})})),dt.use((function(){for(var e=void 0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];L()(n[0],"body._csrf",null)===h.a?(console.log("csrf exception"),n[2]()):F.apply(e,n)})),dt.post("/graphql",ae),dt.get("/auth/logout",(function(e,t){var n=L()(e,"session.app.dbInfo.name","unknown");console.log("logoff (".concat(n,"), delete session")),delete e.session.app;var r=Object(E.v1)();e.session.app={oauthState:r},t.json({url:T(r)})})),dt.get("/auth/:oauth",q),["/","/latest","/popular","/color/:id","/new","/like"].forEach((function(e){dt.get(e,lt)})),dt.get("/portfolio",(function(e,t,n){_(e)?n():n(401)}),lt),dt.get("/adminpanel",(function(e,t,n){P(e)?n():n(403)}),lt),dt.use((function(e,t){console.error("Error: 404, ".concat(e.url," not found")),t.status(400).sendFile(B)})),dt.use((function(e,t,n,r){console.error("Error: ".concat(e.toString(),", ").concat(t.url)),"POST"===t.method?n.status(400).json({errors:!0}):n.status(400).sendFile(B)})),dt.listen(h.f,(function(){return console.log("app (mode: ".concat("production",") is running on: http://localhost:").concat(h.f))})).timeout=5e3,Object(r.exec)("curl ifconfig.me",(function(e,t,n){e?console.error(n):console.log("public IP addr: ".concat(t))}))}]);